---
name: explore
description: 当用户要求探索、分析某个模块或代码部分并要求给出总结和描述时启用该技能
allowed-tools: mcp__code-RAG__*
---

# 探索代码模块

执行此技能时，你需要深入探索指定的模块，进行全面的代码分析和文档整理。

## 探索流程

进行探索时，派发多个 subagent 进行并发代码预览和分析。

### Step 1: 收集模块信息

**1.1 模块基础信息收集**
- 模块的文件结构和组织方式
- 模块的主要入口点和导出接口
- 模块的依赖关系（导入了哪些模块）
- 模块被哪些其他模块使用（反向依赖）

**1.2 功能识别**
- 遍历模块中的所有函数、类、方法
- 识别公共 API 和内部实现
- 标记关键功能和辅助功能
- 识别配置项和常量定义

**1.3 关系映射**
- 绘制模块依赖图
- 识别循环依赖
- 标记核心依赖和可选依赖
- 分析模块在整体架构中的位置

### Step 2: 深度分析

**2.1 功能分析**
- 每个功能的输入输出
- 功能的实现方式和算法
- 功能的使用场景
- 功能的性能特征

**2.2 问题识别**
- 代码质量问题（重复代码、过长函数、复杂度过高）
- 潜在的 bug 和边界情况处理不当
- 安全隐患（如未验证的输入、硬编码的敏感信息）
- 性能瓶颈
- 内存泄漏风险
- 线程安全问题

**2.3 局限性分析**
- 技术债务
- 可扩展性限制
- 兼容性约束
- 性能上限
- 功能边界

**2.4 优化建议**
- 代码重构建议
- 性能优化方向
- 架构改进建议
- 测试覆盖增强
- 文档完善建议

### Step 3: 创建报告

**3.1 报告结构**

将分析结果整理成文档，保存路径：`.claude/docs/explore/<模块名>/report.md`

**3.2 报告模板**
```markdown
# <模块名> 总览报告

## 模块介绍

### 基本信息
- **模块路径**: 
- **主要职责**: 
- **核心功能**: 

### 技术栈
- 使用的语言特性
- 依赖的第三方库
- 设计模式

## 调用关系

A[当前模块] --> B[依赖模块1]
A --> C[依赖模块2]
D[上层模块1] --> A
E[上层模块2] --> A

## 可实现列表

### 当前已实现
- 功能1：具体描述
- 功能2：具体描述

### 可扩展功能
- 扩展方向1：实现难度、预期收益
- 扩展方向2：实现难度、预期收益

## 不可实现列表

### 技术限制
- 限制1：原因分析
- 限制2：原因分析

### 设计约束
- 约束1：为何不能实现
- 约束2：为何不能实现

## 局限性

### 性能局限
- 瓶颈点描述
- 性能上限分析
- 影响范围

### 功能局限
- 边界情况
- 不支持的场景
- 兼容性限制

### 可维护性局限
- 代码复杂度问题
- 耦合度分析
- 测试覆盖不足

## 问题列表

### 严重问题
| 问题描述 | 影响范围 |
|---------|---------|
| 问题1   | 范围    |

### 中等问题
| 问题描述 | 影响范围 |
|---------|---------|
| 问题1   | 范围    |

### 潜在问题
| 问题描述 | 触发条件 |
|---------|---------|
| 问题1   | 条件    |

### 代码质量问题
- 代码异味
- 重复代码
- 复杂度过高的函数

## 优化列表

### 性能优化
| 优化项 | 当前状态 | 优化方案 | 预期收益 | 实施难度 |
|-------|---------|---------|---------|---------|
| 优化1 | 描述    | 方案    | 收益    | 低/中/高 |

### 代码重构
- 重构点1：目标、方案、风险
- 重构点2：目标、方案、风险

### 架构改进
- 改进点1：现状、目标、实施路径
- 改进点2：现状、目标、实施路径

### 测试增强
- 缺失的测试用例
- 需要增加的集成测试
- 性能测试建议

## 问题解答

### Q1: <用户问题1>
**A1**: 详细解答...

### Q2: <用户问题2>
**A2**: 详细解答...
```

## 执行要点

1. **并发分析**: 使用多个 subagent 同时分析不同文件，提高效率
2. **深度优先**: 对核心功能进行深入分析，对辅助功能进行概览
3. **数据驱动**: 使用具体的数据和指标支撑分析结论
4. **可操作性**: 给出的建议应该具体、可执行
5. **优先级**: 对问题和优化项标注优先级
6. **风险评估**: 对每个问题和优化方案评估风险
7. **完整性**: 确保报告涵盖所有关键方面
8. **可读性**: 使用表格、图表、列表等提高可读性

## 输出规范

- 报告使用简体中文
- 所有路径使用项目相对路径
- 代码片段必须标注语言类型
- 使用 Mermaid 图表展示关系
- 问题描述要具体，不能泛泛而谈
- 每个建议都要说明原因和预期效果